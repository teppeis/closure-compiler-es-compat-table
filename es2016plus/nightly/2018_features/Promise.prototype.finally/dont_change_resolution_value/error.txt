// 2018 features / Promise.prototype.finally / don't change resolution value
module.exports = (asyncTestPassed) => {
  var score = 0;
  function thenFn(result)  {
    score += (result === "foo");
    check();
  }
  function catchFn(result) {
    score += (result === "bar");
    check();
  }
  function finallyFn() {
    score++;
    check();
    return Promise.resolve("foobar");
  }
  Promise.resolve("foo").finally(finallyFn).then(thenFn);
  Promise.reject("bar").finally(finallyFn).catch(catchFn);
  function check() {
    if (score === 4) asyncTestPassed();
  }

};
----------------------------------------------------------
/tmp/faast/172df142-c2d8-47c2-98c1-c28578c18297/node_modules/google-closure-compiler-linux/compiler: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.32' not found (required by /tmp/faast/172df142-c2d8-47c2-98c1-c28578c18297/node_modules/google-closure-compiler-linux/compiler)
/tmp/faast/172df142-c2d8-47c2-98c1-c28578c18297/node_modules/google-closure-compiler-linux/compiler: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.34' not found (required by /tmp/faast/172df142-c2d8-47c2-98c1-c28578c18297/node_modules/google-closure-compiler-linux/compiler)
